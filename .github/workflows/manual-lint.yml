name: Lint workflow

on:
    workflow_dispatch:

jobs:
    lint-black:
        name: Lint by black 🖤
        runs-on: ubuntu-latest
        strategy:
            matrix:
                python-version: [ "3.11" ]
        steps:
            -   name: Checkout code 📥
                uses: actions/checkout@v4

            -   name: Set up Python 🐍 ${{ matrix.python-version }}
                uses: actions/setup-python@v4
                with:
                    python-version: ${{ matrix.python-version }}

            -   name: Lint by black ⚫
                uses: psf/black@stable
                with:
                    options: "--check"
                    src: "./src"

    lint-flake8:
        name: Lint by flake8 ❄️
        runs-on: ubuntu-latest
        strategy:
            matrix:
                python-version: [ "3.11" ]
        steps:
            -   name: Checkout code 📥
                uses: actions/checkout@v4

            -   name: Set up Python 🐍 ${{ matrix.python-version }}
                uses: actions/setup-python@v4
                with:
                    python-version: ${{ matrix.python-version }}

            -   name: Lint by flake8 🚩
                uses: py-actions/flake8@v2
                with:
                    max-line-length: "110"
                    path: "src"
                    plugins: "flake8-comprehensions flake8-quotes pep8-naming flake8-bandit flake8-black"
                    exclude: "htmlcov,local,migrations,__pycache__,.venv,.env"

    lint-isort:
        name: Check imports with isort 📑
        runs-on: ubuntu-latest
        strategy:
            matrix:
                python-version: [ "3.11" ]
        steps:
            -   name: Checkout code 📥
                uses: actions/checkout@v4

            -   name: Set up Python 🐍 ${{ matrix.python-version }}
                uses: actions/setup-python@v4
                with:
                    python-version: ${{ matrix.python-version }}

            -   name: Install isort 🔧
                run: pip install isort

            -   name: Check imports order with isort  🔍
                run: isort --check-only ./src
